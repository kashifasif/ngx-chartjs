!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@ctrl/ngx-chartjs",["exports","@angular/core"],e):e((t.ctrl=t.ctrl||{},t.ctrl["ngx-chartjs"]={}),t.ng.core)}(this,function(t,e){"use strict";var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function g(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}var n=function(){function t(t){this.zone=t,this.chartClick=new e.EventEmitter,this.type="doughnut",this.height=150,this.width=300,this.legend={display:!0,position:"bottom"},this.options={},this.redraw=!1,this.datasetKeyProvider=function(t){return t.label}}return t.prototype.ngAfterViewInit=function(){this.renderChart()},t.prototype.ngOnChanges=function(t){if(!t.firstChange)return this.chartInstance&&this.redraw?(this.chartInstance.destroy(),void this.renderChart()):void this.updateChart()},t.prototype.updateChart=function(){var l=this,t=this.transformData();if(this.chartInstance){if(this.options){var e=require("chart.js");this.chartInstance.options=e.helpers.configMerge(this.chartInstance.options,this.options)}var n=this.chartInstance.config.data&&this.chartInstance.config.data.datasets||[],r=t.datasets||[],y={};n.forEach(function(t){y[l.datasetKeyProvider(t)]=t}),this.chartInstance.config.data.datasets=r.map(function(n){var t,e,r,a,i=y[l.datasetKeyProvider(n)];if(i&&i.type===n.type){try{for(var o=g(Object.keys(n)),s=o.next();!s.done;s=o.next()){var c=s.value;"data"!==c&&(i[c]=n[c])}}catch(u){t={error:u}}finally{try{s&&!s.done&&(e=o["return"])&&e.call(o)}finally{if(t)throw t.error}}try{for(var h=g(Object.keys(i)),p=h.next();!p.done;p=h.next()){var d=p.value;n.hasOwnProperty(d)||"_meta"===d||delete i[d]}}catch(f){r={error:f}}finally{try{p&&!p.done&&(a=h["return"])&&a.call(h)}finally{if(r)throw r.error}}return i.data.splice(n.data.length),n.data.forEach(function(t,e){i.data[e]=n.data[e]}),i}return n});t.datasets;var a=function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&(n[r[a]]=t[r[a]])}return n}(t,["datasets"]);this.chartInstance.config.data=o({},this.chartInstance.config.data,a),this.chartInstance.update()}},t.prototype.renderChart=function(){var t=this,e=this.ref.nativeElement,n=this.transformData();if("undefined"!=typeof this.legend){var r=o({},this.legend,this.options.legend);this.options.legend=r}var a=require("chart.js");this.zone.runOutsideAngular(function(){t.chartInstance=new a(e,{type:t.type,data:n,options:t.options,plugins:t.plugins})})},t.prototype.transformData=function(){if(this.data){if("function"!=typeof this.data)return this.data;var t=this.ref;return this.data(t)}},t.prototype.handleOnClick=function(t){this.chartClick.emit({elements:this.chartInstance.getElementsAtEvent(t),element:this.chartInstance.getElementAtEvent(t),dataset:this.chartInstance.getDatasetAtEvent(t),$event:t})},t.decorators=[{type:e.Component,args:[{selector:"ngx-chartjs",template:'\n  \x3c!-- wrapping div required for height, width to work --\x3e\n  <div>\n    <canvas\n      #ref\n      [attr.height]="height"\n      [attr.width]="width"\n      (click)="handleOnClick($event)"\n    ></canvas>\n  </div>\n  ',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:e.NgZone}]},t.propDecorators={ref:[{type:e.ViewChild,args:["ref"]}],chartClick:[{type:e.Output}],type:[{type:e.Input}],data:[{type:e.Input}],height:[{type:e.Input}],width:[{type:e.Input}],legend:[{type:e.Input}],options:[{type:e.Input}],plugins:[{type:e.Input}],redraw:[{type:e.Input}],datasetKeyProvider:[{type:e.Input}]},t}(),r=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{exports:[n],declarations:[n]}]}],t}();t.ChartjsComponent=n,t.ChartjsModule=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ctrl-ngx-chartjs.umd.min.js.map